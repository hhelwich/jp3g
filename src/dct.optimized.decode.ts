import { mult8x8, transp8x8 } from './dct.naive-matrix.encode'
const { cos, PI, SQRT2 } = Math

const M = [
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  SQRT2 * cos((1 / 16) * PI),
  SQRT2 * cos((3 / 16) * PI),
  SQRT2 * cos((5 / 16) * PI),
  SQRT2 * cos((7 / 16) * PI),
  SQRT2 * cos((9 / 16) * PI),
  SQRT2 * cos((11 / 16) * PI),
  SQRT2 * cos((13 / 16) * PI),
  SQRT2 * cos((15 / 16) * PI),
  SQRT2 * cos((2 / 16) * PI),
  SQRT2 * cos((6 / 16) * PI),
  SQRT2 * cos((10 / 16) * PI),
  SQRT2 * cos((14 / 16) * PI),
  SQRT2 * cos((18 / 16) * PI),
  SQRT2 * cos((22 / 16) * PI),
  SQRT2 * cos((26 / 16) * PI),
  SQRT2 * cos((30 / 16) * PI),
  SQRT2 * cos((3 / 16) * PI),
  SQRT2 * cos((9 / 16) * PI),
  SQRT2 * cos((15 / 16) * PI),
  SQRT2 * cos((21 / 16) * PI),
  SQRT2 * cos((27 / 16) * PI),
  SQRT2 * cos((1 / 16) * PI),
  SQRT2 * cos((7 / 16) * PI),
  SQRT2 * cos((13 / 16) * PI),
  SQRT2 * cos((4 / 16) * PI),
  SQRT2 * cos((12 / 16) * PI),
  SQRT2 * cos((20 / 16) * PI),
  SQRT2 * cos((28 / 16) * PI),
  SQRT2 * cos((4 / 16) * PI),
  SQRT2 * cos((12 / 16) * PI),
  SQRT2 * cos((20 / 16) * PI),
  SQRT2 * cos((28 / 16) * PI),
  SQRT2 * cos((5 / 16) * PI),
  SQRT2 * cos((15 / 16) * PI),
  SQRT2 * cos((25 / 16) * PI),
  SQRT2 * cos((3 / 16) * PI),
  SQRT2 * cos((13 / 16) * PI),
  SQRT2 * cos((23 / 16) * PI),
  SQRT2 * cos((1 / 16) * PI),
  SQRT2 * cos((11 / 16) * PI),
  SQRT2 * cos((6 / 16) * PI),
  SQRT2 * cos((18 / 16) * PI),
  SQRT2 * cos((30 / 16) * PI),
  SQRT2 * cos((10 / 16) * PI),
  SQRT2 * cos((22 / 16) * PI),
  SQRT2 * cos((2 / 16) * PI),
  SQRT2 * cos((14 / 16) * PI),
  SQRT2 * cos((26 / 16) * PI),
  SQRT2 * cos((7 / 16) * PI),
  SQRT2 * cos((21 / 16) * PI),
  SQRT2 * cos((3 / 16) * PI),
  SQRT2 * cos((17 / 16) * PI),
  SQRT2 * cos((31 / 16) * PI),
  SQRT2 * cos((13 / 16) * PI),
  SQRT2 * cos((27 / 16) * PI),
  SQRT2 * cos((9 / 16) * PI),
]

/**
 * TODO: optimize
 */
export const idct = (T: number[]) =>
  mult8x8(transp8x8(M), mult8x8(T, M)).map(x => x / 8)
